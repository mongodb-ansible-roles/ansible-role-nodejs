---
- gather_facts: false
  name: Setup RHEL6
  hosts: rhel6
  tasks:
    - name: Subscribe container
      redhat_subscription:
        auto_attach: true
        force_register: true
        password: "{{ lookup('env','REDHAT_REGISTRY_SERVICE_ACCOUNT_PASSWORD') }}"
        username: "{{ lookup('env','REDHAT_REGISTRY_SERVICE_ACCOUNT_USERNAME') }}"

    - name: Install packages
      yum:
        name:
          - sudo
          - tar
        state: present

- gather_facts: false
  hosts: archlinux
  name: Prepare Archlinux
  tasks:
    - name: Raw update pacman database
      raw: pacman -Syu --noconfirm
      changed_when: false
    - name: Raw install python
      raw: pacman -S python3 --noconfirm
      changed_when: false
    - name: Install sudo
      pacman:
        name: sudo
        state: present
    - name: Create arch user
      user:
        name: arch
        group: root
